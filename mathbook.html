<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
		.frame {
			float:left;
			width:66%;
			border:solid black 1px;
			font-family:Calibri,Arial, Helvetica, sans-serif;
		}
		
	
		.frame div {
			width:95%;
			border-top:solid black 1px;
			margin: 2.5%;
		}
		
		.frame div.title {
			font-size:1.5em;
		}
	
		.frame span {
			font-family: mistral,Comic Sans MS,cursive,sans-serif;
			font-size:1.125em;
		}
		
		.frame img.dragon {
			display: block;
    		margin-left: auto;
    		margin-right: auto
		}
		
		.frame label {
			margin-left:1em;
		}
		
		.frame #next, #nextLabel{
			visibility:hidden;
		}
		
		.frame #prev, #prevLabel{
			visibility:hidden;
		}
		
		.frame div.nav {
			width:45%;
			float:left;
		}
		
		.frame div.links {
			width:45%;
			float:left;
		}
		
		.frame input.link {
			margin-left:1em;
		}
		
		.advert {
			width:14%;
			float:left;
			margin-left:1%;
			margin-right:1%;

			border:solid black 1px;
		}
		
		.menu {
			width:14%;
			margin-left:1%;
			margin-right:1%;
			float:left;
			border:solid black 1px;
		}
		
	</style>
	<script type="text/javascript" src="scripts/pageloader.js"></script>
	<script type="text/javascript" src="scripts/library.js"></script>
	<script type="text/javascript">
		window.onload=setPage;
		var currentPage=Intro;
				
		function nextPage() {
			currentPage=currentPage.next;
			setPage();
		}
		
		function prevPage() {
			currentPage=currentPage.prev;
			setPage();
		}
		
		function linkPage(id) {
console.log(currentPage.text);			
			var n=parseInt(id.substr(4));
			var linkPage=currentPage.links[n];
			if(linkPage.loaded) {
var re = /prevLabel\" for=\"prev\">.*</;				
console.log(1,linkPage.html.match(re))				
				var re = /prevLabel\" for=\"prev\">.*<\/label>/;
				var ns ='prevLabel" for="prev">'+currentPage.text+'</label>';
console.log(linkPage.html.match(re));				
				linkPage.html=linkPage.html.replace(re,ns);			
				linkPage.prev=currentPage;
				currentPage=linkPage;
				setPage();
			}
			else {
				loadPage(linkPage,currentPage,true)
			}
		}
				
		function firstPage() {
			if(currentPage.loaded) {
				clearInterval(waitOnFirstPage);
				setPage();
			}
		}
		
		function setPage() {			
			document.getElementById("holder").innerHTML=currentPage.html;
			if(currentPage.next) {
				document.getElementById("next").style.visibility='hidden';
				document.getElementById("nextLabel").style.visibility='hidden';
				if(currentPage.next.loaded) {
					document.getElementById("next").style.visibility='visible';
					document.getElementById("nextLabel").style.visibility='visible';
					document.getElementById("next").addEventListener('click', nextPage, false);
				}
				else {
					loadPage(currentPage.next,currentPage,false);
				}
			}
			if(currentPage.prev) {
				document.getElementById("prev").style.visibility='hidden';
				document.getElementById("prevLabel").style.visibility='hidden';
				if(currentPage.prev.loaded) {
					document.getElementById("prev").style.visibility='visible';
					document.getElementById("prevLabel").style.visibility='visible';
					document.getElementById("prev").addEventListener('click', prevPage, false);
				}
				else {
					loadPage(currentPage.prev,currentPage,false);
				}
			}
			if(currentPage.links) {
				for(var i=0; i<currentPage.links.length;i++) {
					document.getElementById("link"+i).style.visibility='visible';
					document.getElementById("link"+i+"Label").style.visibility='visible';
					document.getElementById("link"+i).addEventListener('click', function() {linkPage(this.id);}, false);	
				}
			}
		}

	</script>
</head>
<body>
	<div class="menu">
		jfdha dsksa ces hewiq hrkjsfjdsf hkjdsf jdsf k.jdsf ewkjhf js jdsb csbc sjdfc jdsc jsdc ksjdfwfhds jmxn xmncsjc xjfsh xbvmxbmdsc jhsj jhf jfj dskjfh kjfkjdshfsd hfsdkjf d v f k fdh
	</div>
	<div id="holder" class="frame">

	</div>	
	<div class="advert">
		jfdha dsksa ces hewiq hrkjsfjdsf hkjdsf jdsf k.jdsf ewkjhf js jdsb csbc sjdfc jdsc jsdc ksjdfwfhds jmxn xmncsjc xjfsh xbvmxbmdsc jhsj jhf jfj dskjfh kjfkjdshfsd hfsdkjf d v f k fdh
	</div>	
</body>